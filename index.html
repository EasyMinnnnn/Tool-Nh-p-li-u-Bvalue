<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ğŸ“Œ Bookmarklet Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px auto;
      max-width: 900px;
    }
    textarea {
      width: 100%;
      height: 300px;
      font-family: monospace;
      font-size: 14px;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    #output {
      margin-top: 20px;
      font-family: monospace;
      background: #f0f0f0;
      padding: 10px;
      border: 1px dashed #ccc;
      word-break: break-word;
    }
  </style>
</head>
<body>
  <h2>ğŸ“Œ Bookmarklet Generator</h2>
  <p>DÃ¡n toÃ n bá»™ mÃ£ JavaScript vÃ o Ã´ bÃªn dÆ°á»›i, rá»“i nháº¥n <b>Táº¡o Bookmarklet</b>.</p>
  <textarea id="code" placeholder="DÃ¡n code JavaScript tá»« Google Sheet vÃ o Ä‘Ã¢y..."></textarea><br>
  <button onclick="generateBookmarklet()">ğŸ”— Táº¡o Bookmarklet</button>
  <div id="output"></div>

  <script>
    function generateBookmarklet() {
      let raw = document.getElementById("code").value.trim();

      if (!raw) {
        alert("âš ï¸ Vui lÃ²ng dÃ¡n Ä‘oáº¡n mÃ£ trÆ°á»›c khi táº¡o!");
        return;
      }

      // Xá»­ lÃ½ lá»—i "" tá»« Google Sheet náº¿u cÃ³
      if (raw.includes('""')) {
        raw = raw.replace(/""/g, '"');
      }

      // Encode URI vÃ  bao Ä‘oáº¡n mÃ£ trong IIFE
      const wrapped = `javascript:(function(){\n${raw}\n})();`;

      const encoded = wrapped.replace(/\n/g, '\\n').replace(/"/g, '%22');
      const htmlOutput = `<b>ğŸ“ Bookmarklet:</b><br><code>${wrapped}</code>`;

      document.getElementById("output").innerHTML = htmlOutput;
    }
  </script>
</body>
</html>
